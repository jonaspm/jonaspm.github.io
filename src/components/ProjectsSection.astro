---
import { getImage } from "astro:assets";
import sorteosClickImage from "@/assets/images/sorteos.click.png";
import autosolutionsImage from "@/assets/images/autosolutions.mx.png";
import enerlinqImage from "@/assets/images/enerlinq.com.png";
import gerardoAncerImage from "@/assets/images/gerardoancer.com.png";
import hackcuuImage from "@/assets/images/hackcuu.com.png";
import projectsData from "@/assets/data/projects.json";

// Map image filenames to imported images
const imageMap = {
  "enerlinq.com.png": enerlinqImage,
  "autosolutions.mx.png": autosolutionsImage,
  "sorteos.click.png": sorteosClickImage,
  "gerardoancer.com.png": gerardoAncerImage,
  "hackcuu.com.png": hackcuuImage,
};

// Process projects with their images
const projects = await Promise.all(
  projectsData.map(async (project) => ({
    ...project,
    image: await getImage({ src: imageMap[project.image] }),
  }))
);
---

<section id="projects" class="py-8 scroll-mt-20 opacity-0">
  <h2 class="mb-12 text-center text-3xl font-medium text-grayblue-900 dark:text-grayblue-100 gsap-fade-up transition-colors duration-300">
    Featured Projects
  </h2>
  <div class="grid gap-8 md:grid-cols-2">
    {
      projects.map((project) => (
        <a
          href={project.url}
          class="rounded-lg bg-white dark:bg-grayblue-800 border border-grayblue-200 dark:border-grayblue-700 p-6 shadow-lg scale-image grid md:grid-cols-2 gap-4 gsap-fade-up transition-colors duration-300 hover:shadow-xl"
        >
          <div id="project-info" class="flex flex-col gap-3 gsap-fade-up">
            <h3 class="text-xl font-semibold text-blue-500 dark:text-blue-300 gsap-fade-up transition-colors duration-300">
              {project.name}
            </h3>
            <p class="text-grayblue-600 dark:text-grayblue-300 gsap-fade-up transition-colors duration-300">{project.description}</p>
            <div class="flex flex-wrap gap-2 mt-2 gsap-fade-up">
              {project.skills.map((skill) => (
                <span class="px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-600/20 text-blue-600 dark:text-blue-200 rounded-full border border-blue-200 dark:border-blue-600/30 transition-colors duration-300">
                  {skill}
                </span>
              ))}
            </div>
          </div>
          <div class="project-image self-center gsap-fade-up">
            <div class="overflow-hidden aspect-video rounded-lg gsap-fade-up">
              <img
                loading="lazy"
                class="duration-300 transition-all aspect-video"
                src={project.image.src}
                alt={project.name}
              />
            </div>
          </div>
        </a>
      ))
    }
  </div>
</section>
